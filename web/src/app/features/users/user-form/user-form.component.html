<div class="user-form-page">
  <div class="header-section">
    <h1 class="page-title">Editar Usuário</h1>
  </div>

  <p-card>
    @if (errorMessage()) {
      <p-message
        severity="error"
        [text]="errorMessage()!"
        styleClass="w-full mb-4"
      />
    }

    @if (user(); as userData) {
      <div class="user-info mb-4">
        <div class="form-field">
          <label class="form-label">Nome</label>
          <p class="user-info-text">{{ userData.name }}</p>
        </div>
        <div class="form-field">
          <label class="form-label">Email</label>
          <p class="user-info-text">{{ userData.email }}</p>
        </div>
        @if (userData.phone) {
          <div class="form-field">
            <label class="form-label">Telefone</label>
            <p class="user-info-text">{{ userData.phone }}</p>
          </div>
        }
        <div class="form-field">
          <label class="form-label">Perfil</label>
          <p class="user-info-text">{{ userData.role }}</p>
        </div>
      </div>

      <form [formGroup]="membershipForm" (ngSubmit)="onSubmit()" class="form-grid">
        <!-- Unit -->
        <div class="form-field">
          <label for="unit_id" class="form-label">Unidade</label>
          <p-select
            id="unit_id"
            formControlName="unit_id"
            [options]="units()"
            optionLabel="number"
            optionValue="id"
            placeholder="Selecione uma unidade"
            [showClear]="true"
            styleClass="w-full"
          />
        </div>

        <!-- Active -->
        <div class="form-field col-span-full">
          <div class="flex align-items-center">
            <p-checkbox
              formControlName="is_active"
              [binary]="true"
              inputId="is_active"
            />
            <label for="is_active" class="ml-2 cursor-pointer">Usuário ativo no condomínio</label>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions col-span-full">
          <p-button
            label="Cancelar"
            severity="secondary"
            [outlined]="true"
            (click)="cancel()"
            [disabled]="loading()"
          />
          <p-button
            type="submit"
            label="Salvar"
            [loading]="loading()"
            [disabled]="loading()"
          />
        </div>
      </form>
    }
  </p-card>

  <p-toast />
</div>
