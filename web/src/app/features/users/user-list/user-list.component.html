<div class="user-list">
  <div class="header-section">
    <h1 class="page-title">Usuários</h1>
  </div>

  <div class="filters-section">
    <span class="p-input-icon-left w-full md:w-auto">
      <i class="pi pi-search"></i>
      <input
        type="text"
        pInputText
        placeholder="Buscar usuários..."
        (input)="onSearch($event)"
        class="w-full md:w-80"
      />
    </span>
  </div>

  <p-table
    [value]="users()"
    [loading]="loading()"
    [paginator]="true"
    [rows]="rowsPerPage"
    [totalRecords]="totalRecords()"
    [lazy]="true"
    (onLazyLoad)="onPageChange($event)"
    [rowsPerPageOptions]="[10, 25, 50]"
    styleClass="p-datatable-striped"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Telefone</th>
        <th>Perfil</th>
        <th>Status</th>
        <th style="width: 50px"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr (click)="navigateToUser(user)" class="cursor-pointer">
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.phone || '-' }}</td>
        <td>
          <p-tag
            [value]="getRoleLabel(user.role)"
            [severity]="getRoleSeverity(user.role)"
          />
        </td>
        <td>
          <p-tag
            [value]="getStatusLabel(user.is_active)"
            [severity]="getStatusSeverity(user.is_active)"
          />
        </td>
        <td>
          <i class="pi pi-chevron-right text-gray-400"></i>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6" class="text-center">Nenhum usuário encontrado</td>
      </tr>
    </ng-template>
  </p-table>

  <p-toast />
</div>
