<div class="dashboard">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1 class="welcome-title">
      {{ getGreeting() }}, {{ currentUser()?.name }}!
    </h1>
    <p class="welcome-subtitle">
      Aqui está um resumo do seu condomínio.
    </p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    @if (loading()) {
      @for (item of [1, 2, 3, 4]; track item) {
        <p-card styleClass="stat-card">
          <p-skeleton width="100%" height="5rem" />
        </p-card>
      }
    } @else {
      @for (card of cards(); track card.title) {
        <p-card styleClass="stat-card">
          <div class="stat-card-content">
            <div class="stat-icon-wrapper" [style.background-color]="card.bgColor">
              <i [class]="card.icon" [style.color]="card.color"></i>
            </div>
            <div class="stat-info">
              <span class="stat-label">{{ card.title }}</span>
              <span class="stat-value">{{ card.value }}</span>
            </div>
          </div>
        </p-card>
      }
    }
  </div>

  <!-- Bottom Section: Activity Feed + Quick Actions -->
  <div class="bottom-section">
    <!-- Recent Activity -->
    <div class="activity-section">
      <p-card>
        <ng-template #header>
          <div class="section-header">
            <h2 class="section-title">Atividade Recente</h2>
          </div>
        </ng-template>
        @if (loading()) {
          @for (item of [1, 2, 3]; track item) {
            <div class="activity-skeleton">
              <p-skeleton shape="circle" size="2.5rem" />
              <div class="activity-skeleton-text">
                <p-skeleton width="80%" height="1rem" />
                <p-skeleton width="40%" height="0.75rem" />
              </div>
            </div>
          }
        } @else {
          <div class="activity-timeline">
            @for (activity of activities(); track $index) {
              <div class="activity-item">
                <div class="activity-icon" [style.background-color]="activity.iconBg">
                  <i [class]="activity.icon" [style.color]="activity.iconColor"></i>
                </div>
                <div class="activity-content">
                  <p class="activity-description">{{ activity.description }}</p>
                  <span class="activity-time">{{ activity.time }}</span>
                </div>
              </div>
            }
            @if (activities().length === 0) {
              <p class="activity-empty">Nenhuma atividade recente.</p>
            }
          </div>
        }
      </p-card>
    </div>

    <!-- Quick Actions -->
    @if (isAdminOrSindico()) {
      <div class="quick-actions-section">
        <p-card>
          <ng-template #header>
            <div class="section-header">
              <h2 class="section-title">Ações Rápidas</h2>
            </div>
          </ng-template>
          <div class="quick-actions-list">
            <p-button
              label="Novo Usuário"
              icon="pi pi-user-plus"
              severity="secondary"
              [outlined]="true"
              styleClass="quick-action-btn"
              routerLink="/users/new"
            />
            <p-button
              label="Novo Convite"
              icon="pi pi-envelope"
              severity="secondary"
              [outlined]="true"
              styleClass="quick-action-btn"
              routerLink="/invites"
            />
            <p-button
              label="Nova Unidade"
              icon="pi pi-building"
              severity="secondary"
              [outlined]="true"
              styleClass="quick-action-btn"
              routerLink="/units/new"
            />
          </div>
        </p-card>
      </div>
    }
  </div>
</div>
